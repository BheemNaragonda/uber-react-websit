(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([["legacy-2402"],{62402:function(t,e,n){"use strict";n.d(e,{S:function(){return _t},C:function(){return Kt}});var o=n(43193),r=n(29230),i=n(43915),c=n(9383),a=n.n(c),u=n(12518),l=n(74708),s=n(36151),p=n(7860),f=n(33990);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,m(o.key),o)}}function m(t){var e=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==d(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===d(e)?e:String(e)}function O(t,e){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=x(t);if(e){var r=x(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return w(this,n)}}function w(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}(n,t);var e=P(n);function n(){return g(this,n),e.apply(this,arguments)}return function(t,e,n){e&&v(t.prototype,e),n&&v(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return(0,f.tZ)(p.Z,b(b({viewBox:"0 0 24 24"},this.props),{},{children:(0,f.tZ)("path",{d:"M10.5 13.5L.5 11 21 3l-8 20.5-2.5-10z"})}))}}]),n}(s.Component),D=n(51018);function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,L(o.key),o)}}function L(t){var e=function(t,e){if("object"!==j(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==j(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===j(e)?e:String(e)}function C(t,e){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=_(t);if(e){var r=_(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return R(this,n)}}function R(t,e){if(e&&("object"===j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(n,t);var e=E(n);function n(){return S(this,n),e.apply(this,arguments)}return function(t,e,n){e&&I(t.prototype,e),n&&I(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return(0,f.tZ)(D.$,{$color:this.props.color})}}]),n}(o.PureComponent);function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,M(o.key),o)}}function Z(t,e){return(Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=K(t);if(e){var r=K(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return N(this,n)}}function N(t,e){if(e&&("object"===$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return A(t)}function A(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function K(t){return(K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function V(t,e,n){return(e=M(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M(t){var e=function(t,e){if("object"!==$(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==$(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===$(e)?e:String(e)}var H=r.v.colors,U=(0,i.zo)("div",(function(t){return V(V(V(V(V(V(V({position:"absolute",height:"100%"},t.$rtl?"left":"right","15px"),"cursor","pointer"),"fontSize","16px"),"width","1em"),"display","flex"),"alignItems","center"),"justifyContent","center")})),X=function(t){var e=t.$error,n=t.$isLoadingCurrentLocation;return{color:e?H.negative400:H.black,opacity:e||n?1:.2,":hover":{color:H.primary600,opacity:1},":focus":{color:e?H.negative400:H.primary600,opacity:1}}},q=(0,i.zo)(l.Z,X),Q=(0,i.zo)(k,X),W=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Z(t,e)}(n,t);var e=F(n);function n(){var t;B(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return V(A(t=e.call.apply(e,[this].concat(r))),"clearSelection",(function(){t.props.clearSelection(t.props.type)})),V(A(t),"handleLocationKeyPress",(function(e){e&&"Enter"===e.key&&t.props.fetchCurrentLocation()})),V(A(t),"handleDeleteKeyPress",(function(e){e&&"Enter"===e.key&&t.clearSelection()})),t}return function(t,e,n){e&&z(t.prototype,e),n&&z(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var t=this.props,e=t.rtl,n=t.isVisible,o=t.fetchCurrentLocation,r=t.localization,i=t.isLoadingCurrentLocation,c=t.error;return i?(0,f.tZ)(U,{$rtl:e,children:(0,f.tZ)(T,{color:H.primary300})}):(0,f.tZ)(U,{$rtl:e,children:n?(0,f.tZ)(q,{width:"12px",height:"12px",onClick:this.clearSelection,onKeyPress:this.handleDeleteKeyPress,tabIndex:"0",role:"button",size:"small","aria-label":r.clearPickupAriaLabel,$error:c,$isLoadingCurrentLocation:i,className:"pe-location-clear"}):(0,f.tZ)(Q,{width:"16px",height:"16px",onClick:o,onKeyPress:this.handleLocationKeyPress,tabIndex:"0",role:"button",size:"small","aria-label":r.locationLabel,$error:c,$isLoadingCurrentLocation:i,className:"pe-location-fetch"})})}}]),n}(o.PureComponent),Y=n(56484),G=n.n(Y),J=n(75853);function tt(t){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?et(Object(n),!0).forEach((function(e){st(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,pt(o.key),o)}}function it(t,e){return(it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=lt(t);if(e){var r=lt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return at(this,n)}}function at(t,e){if(e&&("object"===tt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ut(t)}function ut(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lt(t){return(lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function st(t,e,n){return(e=pt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pt(t){var e=function(t,e){if("object"!==tt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==tt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tt(e)?e:String(e)}var ft=r.v.colors,dt=(0,i.zo)("ul",{border:0,left:0,right:0,listStyle:"none",margin:0,padding:"16px 0",overflowY:"auto",position:"absolute",zIndex:2,backgroundColor:ft.primary50}),yt=(0,i.zo)("div",{backgroundColor:ft.black,opacity:.1,position:"absolute",top:0,left:"18px",right:"18px",height:"1px"}),bt=(0,i.zo)("li",(function(t){var e=t.$focused;t.$isLast;return{color:ft.primary,backgroundColor:e?ft.primary200:ft.primary50,display:"flex",alignItems:"center",cursor:"pointer",minHeight:"45px",padding:"0 43px",boxSizing:"border-box",fontSize:"16px",lineHeight:"26px"}})),ht=(0,i.zo)("span",{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}),gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&it(t,e)}(n,t);var e=ct(n);function n(){var t;ot(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return st(ut(t=e.call.apply(e,[this].concat(r))),"handleKeysPressed",(function(e){var n=t.props,o=n.items,r=n.closeList,i=n.type,c=n.focusedIndex;if(o){var a;if("ArrowDown"===e.key&&(a=null===c||c>=o.length-1?0:c+1,e.preventDefault&&e.preventDefault(),t.props.focusIndex(a)),"ArrowUp"===e.key&&(a=null===c||c<=0?o.length-1:c-1,e.preventDefault&&e.preventDefault(),t.props.focusIndex(a)),"Enter"===e.key){var u=o[c],l=u.id,s=u.provider;return e.preventDefault&&e.preventDefault(),t.props.onClickItem(l,s,c)}if("Escape"===e.key&&i)return e.preventDefault&&e.preventDefault(),r(i)}})),st(ut(t),"findFirstStringIndices",(function(t,e){var n=e.toLowerCase(),o=(t||"").trim().toLowerCase(),r=[];if(o)for(var i=!0;i;){var c=r.length?r[r.length-1]-1:void 0,a=n.lastIndexOf(o,c);-1!==a&&r.push(a),-1!==a&&a||(i=!1)}return r})),st(ut(t),"getSuggestionItem",(function(e){var n=(t.props.inputValue||"").trim();if(n){var o=t.findFirstStringIndices(n,e);if(o.length){var r=e;return o.forEach((function(t){r=r.slice(0,t)+"<strong>".concat(r.slice(t,t+n.length),"</strong>")+r.slice(t+n.length,r.length)})),r}}return e})),t}return function(t,e,n){e&&rt(t.prototype,e),n&&rt(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){G()&&G().addEventListener("keydown",this.handleKeysPressed)}},{key:"componentWillUnmount",value:function(){G()&&G().removeEventListener("keydown",this.handleKeysPressed)}},{key:"render",value:function(){var t=this,e=this.props,n=e.type,o=e.items,r=e.listBoxId,i=e.focusedIndex;return n&&(0,f.BX)(dt,{id:r,className:"pe-suggestions",role:"listbox",children:[(0,f.tZ)(yt,{}),o&&o.map((function(e,r){var c=e.addressLine1,a=e.addressLine2,u=e.id,l=e.provider,s="".concat(c).concat(a?", ".concat(a):"");return(0,f.tZ)(bt,nt(nt({$focused:i===r,$isLast:r===o.length-1,onClick:function(e){return t.props.onClickItem(u,l,r)},className:"pe-suggestions-item",role:"option","aria-selected":i===r,"aria-label":"location suggestion item",id:u},J.ki),{},{children:(0,f.tZ)(ht,{dangerouslySetInnerHTML:{__html:t.getSuggestionItem(s)}})}),"".concat(n,"-suggestion-").concat(r))}))]})}}]),n}(o.PureComponent);function vt(t){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,It(o.key),o)}}function Ot(t,e){return(Ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=kt(t);if(e){var r=kt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return wt(this,n)}}function wt(t,e){if(e&&("object"===vt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return xt(t)}function xt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dt(Object(n),!0).forEach((function(e){St(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function St(t,e,n){return(e=It(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function It(t){var e=function(t,e){if("object"!==vt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==vt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===vt(e)?e:String(e)}var Lt=r.v.colors,Ct=u.ZP.values,Et=Ct.fontFamily,Rt=Ct.mediaQueries,_t=1,Tt={content:'""',position:"absolute",left:"-3px",width:"6px",height:"6px"},$t=(0,i.zo)("div",(function(t){var e=t.$rtl,n=t.$hidden,o=t.$pickup,r=t.$destination;return St(St(St(St(St({position:"absolute",top:"33px",bottom:"33px"},e?"right":"left","22px"),"width","1px"),"backgroundColor",n?"none":Lt.black),":before",jt(jt({},Tt),{},{bottom:"-10px",border:"1px solid ".concat(Lt.black),backgroundColor:r?Lt.black:Lt.primary50,width:"5px",height:"5px"})),":after",jt(jt({},Tt),{},{top:"-10px",borderRadius:"50%",border:"1px solid ".concat(Lt.black),backgroundColor:o?Lt.black:Lt.primary50}))})),Bt=(0,i.zo)("div",(function(t){var e=t.$removeTopMargin;return St({flex:"0 0 auto",fontFamily:Et.body,marginBottom:"13px",marginTop:e?0:"31px",position:"relative"},Rt.palm,{marginBottom:"26px",marginTop:e?0:"20px"})})),zt=(0,i.zo)("div",(function(t){return{position:"relative",display:"flex",flexDirection:"row",width:"100%",marginTop:t.$gutter?0:"8px"}})),Zt=(0,i.zo)("div",{position:"relative",display:"flex",flexDirection:"row",flex:"1 1 auto"}),Ft=(0,i.zo)("input",(function(t){var e,n=t.$theme,o=t.$error,r=t.$rtl,i=n.typography;return jt((St(St(St(St(St(St(St(St(St(St(e={position:"relative",zIndex:0,flex:1,minHeight:"52px",backgroundColor:Lt.primary50},r?"paddingLeft":"paddingRight","33px"),r?"paddingRight":"paddingLeft","41px"),"paddingTop","11px"),"paddingBottom","11px"),"border","none"),"color",o?Lt.negative400:Lt.black),"outline","none"),"overflow","hidden"),"whiteSpace","nowrap"),"textOverflow","ellipsis"),St(St(St(e,"boxSizing","border-box"),"margin",0),"width","100%")),i.font300)})),Nt=(0,i.zo)("div",(function(t){return St(St(St(St(St(St({position:"absolute",height:"100%",width:"16px"},t.$rtl?"left":"right","15px"),"cursor","pointer"),"fontSize","23px"),"display","flex"),"alignItems","center"),"justifyContent","center")})),At=(0,i.zo)(l.Z,{color:Lt.black,opacity:.2,":hover":{color:Lt.primary600,opacity:1},":focus":{color:Lt.primary600,opacity:1}}),Kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ot(t,e)}(n,t);var e=Pt(n);function n(t){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),St(xt(o=e.call(this,t)),"state",{isDetectionError:!1,pickupInput:"",destinationInput:"",focusedInput:null,prevPickupDetails:null,prevDestinationDetails:null,focusedPickupIndex:0,focusedDestinationIndex:0}),St(xt(o),"destinationListBoxId","destination-suggestions-listbox-".concat(Math.random())),St(xt(o),"pickupListBoxId","pickup-suggestions-listbox-".concat(Math.random())),St(xt(o),"mapToSubmitEstimatePoint",(function(t,e){return{id:t.id,provider:t.provider,locale:e,latitude:t.lat,longitude:t.long}})),St(xt(o),"setInputValue",(function(t,e){o.setState(St({},"".concat(t,"Input"),o.getInputValueFromPoint(e)))})),St(xt(o),"getInputValueFromPoint",(function(t){return t.addressLine1&&t.addressLine2?"".concat(t.addressLine1,", ").concat(t.addressLine2):"".concat(t.fullAddress)})),St(xt(o),"fetchSuggestions",(function(t){var e=o.props.locale,n=o.getTargetLatLng(),r=n.lat,i=n.long;o.props.getSuggestions({type:t.name,q:t.value,locale:e,lat:r,long:i})})),St(xt(o),"getTargetLatLng",(function(){var t=o.props,e=t.mapCenter,n=t.pickupDetails,r=t.destinationDetails;return n&&n.lat?{lat:n.lat,long:n.long}:r&&r.lat?{lat:r.lat,long:r.long}:{lat:null==e?void 0:e.latitude,long:null==e?void 0:e.longitude}})),St(xt(o),"clickSuggestionItem",(function(t,e,n){var r,i,c=o.state.focusedInput,a=o.props,u=a.locale,l=a.suggestions;c&&l&&l[c]&&(o.props.loadPlaceDetails({type:c,locale:u,id:(null===(r=l[c])||void 0===r?void 0:r[n].id)||"",provider:(null===(i=l[c])||void 0===i?void 0:i[n].provider)||""}),o.loadNextChangedPlace("pickup"===o.state.focusedInput?"destination":"pickup"))})),St(xt(o),"focusIndex",(function(t){var e=o.state.focusedInput;if(e){var n="pickup"===e?"focusedPickupIndex":"focusedDestinationIndex";o.setState(St({},n,t))}})),St(xt(o),"loadNextChangedPlace",(function(t){var e,n,r;o.props.suggestions[t]&&null!==(e=o.props.suggestions[t])&&void 0!==e&&e.length&&(!o.props["".concat(t,"Details")]&&o.state["".concat(t,"Input")]||o.props["".concat(t,"Details")]&&o.state["".concat(t,"Input")]!==o.getInputValueFromPoint(o.props["".concat(t,"Details")]))&&o.props.loadPlaceDetails({type:t,locale:o.props.locale,id:(null===(n=o.props.suggestions[t])||void 0===n?void 0:n[0].id)||"",provider:(null===(r=o.props.suggestions[t])||void 0===r?void 0:r[0].provider)||""});o.setState({focusedInput:null})})),St(xt(o),"focusPickup",(function(){o.pickupRef.focus()})),St(xt(o),"focusDestination",(function(){o.destinationRef.focus()})),St(xt(o),"clearInput",(function(t){o.setState(St(St(St({},"".concat(t,"Input"),""),"focusedInput",null),"".concat(t,"InputChanged"),!1)),o.fetchSuggestions({name:t,value:""}),o.props["".concat(t,"Details")]&&(o.props.clearFEPlaceDetails(t),o.props.clearFEDirections())})),St(xt(o),"closeSuggestionsList",(function(t){o.setState({focusedInput:null}),o["".concat(t,"Ref")].blur()})),St(xt(o),"triggerDetactionError",(function(t,e){o.setState({isDetectionError:t&&e===_t},(function(){o.props.setDetectionError(t,e)}))})),St(xt(o),"fetchCurrentLocation",(function(){o.triggerDetactionError(!1),window&&navigator.geolocation.getCurrentPosition((function(t){t&&t.coords?(o.props.fetchCurrentLocation({lat:t.coords.latitude,lng:t.coords.longitude,lang:o.props.locale}),o.loadNextChangedPlace("destination")):o.triggerDetactionError(!0)}),(function(t){o.triggerDetactionError(!0,t.code)}))})),St(xt(o),"onInputChanged",(function(t){var e=t.target;o.setState(St(St(St({},"".concat(e.name,"Input"),e.value),"focusedInput",e.name),"".concat(e.name,"InputChanged"),!0),(function(){o.triggerDetactionError(!1),o.fetchSuggestions(e)}))})),St(xt(o),"onInputFocused",(function(t){var e=t.target;return o.setState({focusedInput:e.name})})),St(xt(o),"onInputBlured",(function(t){var e=t.target;setTimeout((function(){e.name===o.state.focusedInput&&o.setState({focusedInput:null})}),150),o.props.dataTrackingHandler&&o.props.dataTrackingHandler(e.value,e.name)})),St(xt(o),"clearDestinationSelection",(function(){return o.clearInput("destination")})),St(xt(o),"saveDestRef",(function(t){return o.destinationRef=t})),St(xt(o),"savePickupRef",(function(t){return o.pickupRef=t})),St(xt(o),"handleDeleteDestinationKeyPress",(function(t){t&&"Enter"===t.key&&o.clearDestinationSelection()})),o.fetchSuggestions=a()(o.fetchSuggestions,300),o}return function(t,e,n){e&&mt(t.prototype,e),n&&mt(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(n,[{key:"componentDidUpdate",value:function(t){var e=!1;this.props.pickupDetails&&t.pickupDetails!==this.props.pickupDetails&&(this.setInputValue("pickup",this.props.pickupDetails),e=!0),this.props.destinationDetails&&t.destinationDetails!==this.props.destinationDetails&&(this.setInputValue("destination",this.props.destinationDetails),e=!0),!e||this.props.placeDetailsLoading.pickup||this.props.placeDetailsLoading.destination||(this.props.destinationDetails&&this.props.pickupDetails&&(this.props.loadFEDirections&&this.props.loadFEDirections({destinationDetails:this.props.destinationDetails,pickupDetails:this.props.pickupDetails}),this.props.loadFareEstimates&&this.props.loadFareEstimates({origin:this.mapToSubmitEstimatePoint(this.props.pickupDetails,this.props.locale),destination:this.mapToSubmitEstimatePoint(this.props.destinationDetails,this.props.locale),locale:this.props.locale})),this.props.pickupDetails&&!this.props.destinationDetails?this.focusDestination():!this.props.pickupDetails&&this.props.destinationDetails&&this.focusPickup())}},{key:"render",value:function(){var t,e,n,o=this.props,r=o.localization,i=o.suggestions,c=o.errors,a=o.isLoadingCurrentLocation,u=o.rtl,l=o.pickupDetails,s=o.destinationDetails,p=o.removeTopMargin,d=this.state,y=d.pickupInput,b=d.destinationInput,h=d.focusedInput,g=d.isDetectionError,v=d.focusedPickupIndex,m=d.focusedDestinationIndex,O=h&&i&&i[h],P=!(null==O||!O.length)&&"pickup"===h,w=!(null==O||!O.length)&&"destination"===h,x=P&&(null==O||null===(t=O[v])||void 0===t?void 0:t.id),k=w&&(null==O||null===(e=O[m])||void 0===e?void 0:e.id);return(0,f.BX)(Bt,{$removeTopMargin:p,children:[(0,f.BX)(zt,{$gutter:!0,role:"combobox","aria-expanded":P,"aria-owns":this.pickupListBoxId,"aria-haspopup":"listbox",children:[(0,f.tZ)(Ft,{name:"pickup",$error:c&&c.pickup||g,ref:this.savePickupRef,value:y,title:y,"aria-label":this.props.localization.pickupAriaLabel,placeholder:this.props.localization.pickupPlaceholder,onChange:this.onInputChanged,onFocus:this.onInputFocused,onBlur:this.onInputBlured,autoComplete:"off",$rtl:u,type:"text","aria-autocomplete":"list","aria-controls":this.pickupListBoxId,"aria-activedescendant":x}),(0,f.tZ)(W,{rtl:u,type:"pickup",isLoadingCurrentLocation:a,isVisible:!(null==y||!y.length),clearSelection:this.clearInput,fetchCurrentLocation:this.fetchCurrentLocation,localization:r,error:g})]}),P&&(0,f.tZ)(gt,{inputValue:y,type:h,items:O,onClickItem:this.clickSuggestionItem,closeList:this.closeSuggestionsList,listBoxId:this.pickupListBoxId,focusIndex:this.focusIndex,focusedIndex:v}),(0,f.tZ)(zt,{$gutter:!1,role:"combobox","aria-expanded":w,"aria-owns":this.destinationListBoxId,"aria-haspopup":"listbox",children:(0,f.BX)(Zt,{children:[(0,f.tZ)(Ft,{name:"destination",$error:c&&c.destination,ref:this.saveDestRef,value:b,title:b,"aria-label":this.props.localization.destinationAriaLabel,placeholder:this.props.localization.destinationPlaceholder,onChange:this.onInputChanged,onFocus:this.onInputFocused,onBlur:this.onInputBlured,autoComplete:"off",$rtl:u,type:"text","aria-autocomplete":"list","aria-controls":this.destinationListBoxId,"aria-activedescendant":k}),!(!b||!b.length)&&(0,f.tZ)(Nt,{$rtl:u,children:(0,f.tZ)(At,{width:"12px",height:"12px",onClick:this.clearDestinationSelection,onKeyPress:this.handleDeleteDestinationKeyPress,tabIndex:"0",role:"button",size:"small","aria-label":this.props.localization.clearDestinationAriaLabel,className:"pe-location-clear"})})]})}),w&&(0,f.tZ)(gt,{inputValue:b,type:h,items:O,onClickItem:this.clickSuggestionItem,closeList:this.closeSuggestionsList,listBoxId:this.destinationListBoxId,focusIndex:this.focusIndex,focusedIndex:m}),(0,f.tZ)($t,{$rtl:u,$hidden:"pickup"===h&&i&&i[h]&&!(null===(n=i[h])||void 0===n||!n.length),$pickup:!!l,$destination:!!s})]})}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.isPickupUsingCurrentLocation,o=t.destinationDetails,r=t.pickupDetails,i=e.prevDestinationDetails,c=e.prevPickupDetails,a=e.destinationInput,u=!c||r!==c,l=r&&u&&{prevPickupDetails:r,pickupInput:r.addressLine1};if(n&&l){var s=o&&!a?{destinationInput:o.fullAddress}:{};return jt(jt({},l),s)}var p=o&&(!i||o!==i)&&{prevDestinationDetails:o,destinationInput:o.fullAddress},f=r&&u&&{prevPickupDetails:r,pickupInput:r.fullAddress};return p||f?jt(jt({},p||{}),f||{}):e}}]),n}(o.PureComponent);St(Kt,"defaultProps",{placeDetailsLoading:{},removeTopMargin:!1})},9383:function(t){t.exports=function(t,e,n){var o=null,r=null,i=function(){o&&(clearTimeout(o),r=null,o=null)},c=function(){if(!e)return t.apply(this,arguments);var c=this,a=arguments,u=n&&!o;return i(),r=function(){t.apply(c,a)},o=setTimeout((function(){if(o=null,!u){var t=r;return r=null,t()}}),e),u?r():void 0};return c.cancel=i,c.flush=function(){var t=r;i(),t&&t()},c}}}]);